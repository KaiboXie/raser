#Bootstrap: docker
#From: library/debian:12.1   

Bootstrap: localimage
From: raser-4.0.sif  

%post
    # Use huaweicloud  
    #cp cfg/sources.list /etc/apt/
    #sed -i "s@http://deb.debian.org@http://repo.huaweicloud.com@g" /etc/apt/sources.list
    #echo "deb http://repo.huaweicloud.com/debian bookworm main non-free-firmware
#deb-src http://repo.huaweicloud.com/debian bookworm main non-free-firmware

#deb http://repo.huaweicloud.com/debian-security/ bookworm-security main non-free-firmware
#deb-src http://repo.huaweicloud.com/debian-security/ bookworm-security main non-free-firmware

#deb http://repo.huaweicloud.com/debian bookworm-updates main non-free-firmware
#deb-src http://repo.huaweicloud.com/debian bookworm-updates main non-free-firmware" >> /etc/apt/sources.list


    #apt update 

    ## Build 
    #apt -y install apt-utils git wget vim  
    #apt -y install build-essential libboost-all-dev 


    ## SciPy, Pandas
    #ln -sf /usr/bin/python3 /usr/bin/python
    #apt -y install python3-scipy python3-pandas

    ## ROOT 
    #apt -y install llvm libxpm-dev libxft-dev libxext-dev libgif-dev cmake

    #cd /usr/local/share
    #mkdir root_build root_install 
    #wget https://root.cern/download/root_v6.28.04.source.tar.gz
    #tar xzf root_v6.28.04.source.tar.gz 
    #rm -rf root_v6.28.04.source.tar.gz 
    #mv root-6.28.04 root_src 
    #cd /usr/local/share/root_build
    
    #cmake -DCMAKE_INSTALL_PREFIX=../root_install ../root_src 
    #cmake --build . -- install -j28   
    
    
    ## DEVSIM    
    #apt -y install pipx python3-pip 
    #pipx install devsim --include-deps # not work 

    #pip install devsim --break-system-packages

    pip install mkl --break-system-packages

    ## Geant4-pybind    

    #apt -y install python3-pip libice6 libsm6  
    #pip install matplotlib scipy pandas geant4-pybind 


    ## NGSpice & KiCAD
    #apt -y install ngspice 
    #apt -y install kicad 

    ## ALiBaVa 
    #pip install pylandau tqdm numba h5py PyYAML joblib 
