---
REPs: 2.16
Weekly Plan: 2023-07-10
Journal Club: 2023-07-30-JC171
Team Report: 2023-07-24
---
[[2023-08-28-TEAM]]
- [x] 完成Telescope模块最基本的功能：
	- [x] Test类：简单生成格式和扩散模块一样的假数据的功能，以供后续的调试
	- [x] readdata func负责数据读取与转化：将上一个模块的像素坐标转化为telescope中需要使用的全局坐标
	- [x] Clustering func负责Hit信息到Cluster信息的转化：将每个事例每层的击中信息转化为Cluster信息，保存了每个cluster中心位置以及每个cluster的尺寸信息以供后续使用
	- [x] fit func负责拟合计算每个事例每个DUT的残差
	- [x] Resolution func负责对每块DUT的残差分布进行高斯拟合，得到初步的分辨率

 - [ ] 仍需完成的进阶功能
	 - [ ] Tracking func：对于多cluster事例，根据拟合得到的卡方最小值挑选最合适的径迹
	 - [ ] 最小二乘法替代ROOT一次函数拟合的功能：实际测试时使用最小二乘法，两者实际结果区别可能不大，但要以实验优先
	 - [ ] Swap_Resolution func：根据DUT残差分布拟合得到的方差并不为最终分辨率结果，还要将初步的分辨率，根据DUT在Telescope中的相对位置，还原出DUT本身的分辨率
[[2023-08-21-TEAM]]
- [x] 完善了Geant4部分的代码，其生成的数据已经可以方便的提取并使用
	- [ ] 增加随机粒子入射方向功能，使粒子入射符合实际测试情况
	- [ ] 增加PixelDetector中localposition的存储
[[2023-08-14-TEAM]]
- [ ] 三个主要目标：
	- [ ] 简化芯片构造，给出不同区域掺杂数据
		- [ ] TAICHU3为CMOS工艺，与二级管不同：
			- [ ] 1. 主要靠漂移效应被邻近极板收集
			- [ ] 2. 极板依据收集的电荷数来判断是否满足触发条件而非依据感应电流
			- [ ] 3. 偏压只有1.8V，耗尽区比较小并且该偏压主要目的是维持前级电路功能
	- [ ] 拓展三维的DEVSIM仿真
		- [ ] 三维目前比较难实现，可以考虑简化为二维情况
	- [ ] 多单元的电子学读出
[[2023-07-24-TEAM]]
- [x] 完成G4模块代码，可以自定义像素尺寸材料构造，阵列组成的像素类型和行列数量，每层芯片摆放的位置（translation&rotation)
- [x] 学习DEVSIM，参考Allpix2电场的处理，尤其是对三维情况怎么简化。这周重心在DEVSIM上
- [x] 同时要思考电子学读出部分要怎么做，因为像素探测器是多读出单元的探测器，并且电子学读出可能和DEVSIM也有些我需要知道的联系。这周应当把电子学和DEVSIM相联系的接口弄明白
- [x] 开始写代码：
	- [ ] 像素探测器构建层级结构：
		- [ ] 像素             :每个部分的物质组成，几何大小，可以适当简化
		- [ ] 阵列(layer)   :指定使用什么像素，以及阵列大小构造一层芯片
		- [ ] telescope     :多层芯片组成一个系统
	- [ ] 难点：
		- [ ] 上述模块如何同时给G4和DEVSIM使用
		- [ ] 在经过CalCurrent和电子学readout后，还需要得到阵列击中信息，才能作为最终数据，而阵列着火需要经过阈值判断，并且有些像素探测器还有收集电荷量的统计功能，这点可能会比较难
		- [ ] 三维载流子漂移及感应电流之前没有做过
[[2023-07-10-TEAM]]
- [x] G4代码阅读问题：
	- [ ] 为什么G4部分需要导入Fenics的参数，理论上这两个应该的并行的给CalCurrent用的，两者不应该交叉
	- [ ] 经过检查，实际上G4部分也确实只是有这个初始化参数，但没有使用过
	- [ ] 查看RASER框架发现，里面指出在3D情况下Fenics要提供有效边界条件给G4部分,询问得知是之前遗留下来的问题
- [x] G4认知误区修正：
	- [ ] 之前以为是先生成G4中间文件，再用CalCurrent读取电场分布和粒子信息产生载流子漂移信息。但现在发现，Fenics和G4都没有生成中间文件，都保留在了类的字典中
	- [ ] 这样做速度肯定比存储中间文件快，但是否会有内存占用过大的问题？
	- [ ] 有内存占用大的问题，但并不是G4或者电场部分带来的，这些数据量一般都在MB级别，主要是多维情况下会带来数据的指数级增长
- [x] 示例输出：
	- [x] 1.1.1 NJU-PIN 生成感应电流和时间的曲线，载流子漂移路径，电场分布，所有画图都在执行完amp模块后再调用画图模块画出来的，中间模块不输出文件（包括root）
	- [x] 1.3.3 DEVSIM 生成IV特性曲线以及电子/空穴分布，掺杂浓度，电场
	- [x] 1.3.1 生成了两种model的冲击系数-电场曲线，VanOvenstraeten和Hatakeyama
  
[[2023-07-03-JC171]]
- [x] 尝试运行自己的代码
	- [x] 直接在集群上运行，发现无法定位到一些模块，在自己空间下添加run选项，仍旧有permission denied的问题
	- [x] 已解决：即使是py脚本也需要可执行文件，chmod +x 即可
- [x] 了解devism以及载流子漂移公式
	- [ ] 阅读探测器的计算机模拟
		- [ ] 非结构网格
		- [ ] Scharfetter-Gummel格式，对流扩散，这里是模拟载流子漂移
		- [ ] 肖克来拉莫定理，载流子漂移感应电荷
	- [ ] 查看devsim相关代码
- [x] 了解下已经有人做过的单读出事例1.3
	- [x] 运行1.3.3，理解生成文件的内容
		- [x] 运行集群作业在afs/**/user目录下空间不够
		- [x] 在workfs下限制很多，在scratchfs目录下解决问题
- [x] 进一步了解如何将geant4部分和载流子漂移部分联系起来
	- [x] json文件内，可以详细定义单质/混合物的几何掺杂信息
	- [x] G4部分产生原初电离，在DEVISM中进行载流子漂
- [x] 找到TAICHU3芯片加工工艺，目前可以简化为25* 25* 150um像素上有8.6* 8.6的读出单元
	- [x] towerjazz 180nm工艺
[[2023-06-12-TEAM]]
- [x] 准备JC
- [x] 了解raser其他部分和geant4如何交互
- [x] 确定几个值得进行仿真研究的内容
	- [ ] 先完成像素尺寸的仿真
	- [ ] 每层的掺杂浓度都要做出来，几何构造上可以先适当简化
	- [ ] 不着急开始写代码，先把整个框架过程了解清楚
- [x] 给REP2.16开个头
[[2023-05-29-TEAM]]
- [x] 基础环境
	- [x] 安装基础软件
	- [x] 配置Git
		上传：
			git add .
			git commit -m "text" 
			git push -u origin main
		下载(每次使用前都应先更新)：
			git status 查看修改过的⽂件
			git stash 将⾃⼰修改过的⽂件暂时保存⾄虚拟空间
			git remote update 将主仓库更新的⽂件放⼊缓存
			git merge raser/main ⽤更新⾄缓存的⽂件覆盖本地仓库⾥的⽂件
			git stash pop 将暂存的⾄虚拟空间释放


- [x] 了解基本内容
	- [x] SiC探测器建造动机：
		SiC各方面性能由于Si，尤其是时间响应能力
	- [x] 了解RASER基本信息
		- [x] 这套模拟系统是做什么的
			1. 通过模拟对实验中器件性能做出合理的估计
			2. 指导探测器设计工作
			3. 利用已知器件参数，通过模拟补全设计参数
		- [x] RASER的设计哲学
			- 基于真实的物理模型进行一定的简化
			- 把握物理过程的核心和结果
		- [x] 这个模拟软件由哪些部分构成，各自的大致功能
		- [x] 还有哪些地方可以改进(我能做什么)
	

- [x] 尝试运行
	- [x] 小坑：将windows端git下来的文件，直接移动到服务器上会有小问题，会导致bash脚本不能执行，解决方法如下
		最彻底：在服务器上单独merge
		未尝试但应该也同样效果：
			1、用 vim 打开脚本文件，在命令模式下输入：set ff=unix, 保存就可以了。
			2、在 windows下转换脚本格式，用 Notepad 改变文件格式即可。File-->Conversions-->DOS>UNIX。
			3、在 Linux 下新建一个 .sh 文件，然后复制粘贴过去也是可以的。
			
	- [x] 运行1.1.1
		生成文件存放在fig文件目录下，有些选项则会存放在output下